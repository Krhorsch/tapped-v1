<%= flash[:notice] %>
<%=form_tag '/user_beers' do%>
<div id="beers">
<% @beers.each do |beer| %>
  <p><input type="checkbox" name="beer_ids[]" value="<%= beer.id %>"><%= beer.display %> </input> Rating: <input type="text" name="rating[<%= beer.id %>]"></p><br>
<% end %>
</div>
<%=submit_tag "Update Your Tapped Beers"%>
<% end %>



<h4>Don't See the beer you're Looking For?</h4>
<h5>Add a New Beer to Our Comprehensive List</h5>

<%= form_for(@beer) do |f| %>
<%= render partial: "beers/errors", locals: {object: @beer} %>
<%= f.label :name%>
<%= f.text_field :name%> <br>
<%= f.label :brewery%>
<%= f.text_field :brewery%> <br>
<%= f.label :style%>
<%= f.text_field :style%> <br>
<%= f.submit "Add Beer!" %>
<% end %>

<script type="text/javascript" charset="utf-8" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>
<script type="text/javascript" charset="utf-8">
$(function () {
  $("#new_beer").on("submit", function(e) {
    e.preventDefault()
    var values = $(this).serialize();

    var posting = $.post('/beers', values);

    posting.done(function(data) {
      var beer = data;
      var template = `<p><input type="checkbox" name="beer_ids[]" value="${beer.id}">${beer.name} - ${beer.brewery} - ${beer.style}</input> Rating: <input type="text" name="rating[${beer.id}]"></p><br>`;
      $("#beers").append(template);
      });
  })
});
</script>
